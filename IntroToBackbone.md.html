<!DOCTYPE html>
<html>
  <head>
      <meta charset="utf-8" />
      <title>IntroToBackbone</title>
      <style>.markdown-preview:not([data-use-github-style]) { padding: 2em; font-size: 1.2em; color: rgb(56, 58, 66); overflow: auto; background-color: rgb(250, 250, 250); }
.markdown-preview:not([data-use-github-style]) > :first-child { margin-top: 0px; }
.markdown-preview:not([data-use-github-style]) h1, .markdown-preview:not([data-use-github-style]) h2, .markdown-preview:not([data-use-github-style]) h3, .markdown-preview:not([data-use-github-style]) h4, .markdown-preview:not([data-use-github-style]) h5, .markdown-preview:not([data-use-github-style]) h6 { line-height: 1.2; margin-top: 1.5em; margin-bottom: 0.5em; color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) h1 { font-size: 2.4em; font-weight: 300; }
.markdown-preview:not([data-use-github-style]) h2 { font-size: 1.8em; font-weight: 400; }
.markdown-preview:not([data-use-github-style]) h3 { font-size: 1.5em; font-weight: 500; }
.markdown-preview:not([data-use-github-style]) h4 { font-size: 1.2em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h5 { font-size: 1.1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) h6 { font-size: 1em; font-weight: 600; }
.markdown-preview:not([data-use-github-style]) strong { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) del { color: rgb(94, 97, 110); }
.markdown-preview:not([data-use-github-style]) a, .markdown-preview:not([data-use-github-style]) a code { color: rgb(82, 111, 255); }
.markdown-preview:not([data-use-github-style]) img { max-width: 100%; }
.markdown-preview:not([data-use-github-style]) > p { margin-top: 0px; margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) > ul, .markdown-preview:not([data-use-github-style]) > ol { margin-bottom: 1.5em; }
.markdown-preview:not([data-use-github-style]) blockquote { margin: 1.5em 0px; font-size: inherit; color: rgb(94, 97, 110); border-color: rgb(209, 209, 210); border-width: 4px; }
.markdown-preview:not([data-use-github-style]) hr { margin: 3em 0px; border-top-width: 2px; border-top-style: dashed; border-top-color: rgb(209, 209, 210); background: none; }
.markdown-preview:not([data-use-github-style]) table { margin: 1.5em 0px; }
.markdown-preview:not([data-use-github-style]) th { color: rgb(0, 0, 0); }
.markdown-preview:not([data-use-github-style]) th, .markdown-preview:not([data-use-github-style]) td { padding: 0.66em 1em; border: 1px solid rgb(209, 209, 210); }
.markdown-preview:not([data-use-github-style]) code { color: rgb(0, 0, 0); background-color: rgb(234, 234, 235); }
.markdown-preview:not([data-use-github-style]) pre.editor-colors { margin: 1.5em 0px; padding: 1em; font-size: 0.92em; border-radius: 3px; background-color: rgb(240, 240, 240); }
.markdown-preview:not([data-use-github-style]) kbd { color: rgb(0, 0, 0); border-width: 1px 1px 2px; border-style: solid; border-color: rgb(209, 209, 210) rgb(209, 209, 210) rgb(193, 193, 194); background-color: rgb(234, 234, 235); }
.markdown-preview[data-use-github-style] { font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; line-height: 1.6; word-wrap: break-word; padding: 30px; font-size: 16px; color: rgb(51, 51, 51); overflow: scroll; background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview[data-use-github-style] h1, .markdown-preview[data-use-github-style] h2, .markdown-preview[data-use-github-style] h3, .markdown-preview[data-use-github-style] h4, .markdown-preview[data-use-github-style] h5, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview[data-use-github-style] h1 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview[data-use-github-style] h1 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview[data-use-github-style] p, .markdown-preview[data-use-github-style] blockquote, .markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol, .markdown-preview[data-use-github-style] dl, .markdown-preview[data-use-github-style] table, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview[data-use-github-style] ul, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview[data-use-github-style] ul.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview[data-use-github-style] ul ul, .markdown-preview[data-use-github-style] ul ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview[data-use-github-style] table th, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview[data-use-github-style] code, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview[data-use-github-style] code::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview[data-use-github-style] code::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview[data-use-github-style] code br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview[data-use-github-style] .highlight pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview[data-use-github-style] pre code, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview[data-use-github-style] pre code::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-style: solid; border-width: 1px; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview[data-use-github-style] a { color: rgb(51, 122, 183); }
.markdown-preview[data-use-github-style] code { color: inherit; }
.markdown-preview[data-use-github-style] pre.editor-colors { padding: 0.8em 1em; margin-bottom: 1em; font-size: 0.85em; border-radius: 4px; overflow: auto; }
.scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors::shadow .horizontal-scrollbar { visibility: hidden; }
.scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .vertical-scrollbar, .scrollbars-visible-always .markdown-preview pre.editor-colors:hover::shadow .horizontal-scrollbar { visibility: visible; }
.markdown-preview, .markdown-preview[data-use-github-style] { font-family: 'Helvetica Neue', Helvetica, 'Segoe UI', Arial, freesans, sans-serif; font-size: 16px; line-height: 1.6; word-wrap: break-word; overflow: scroll; box-sizing: border-box; padding: 20px; background-color: rgb(255, 255, 255); }
.markdown-preview > :first-child, .markdown-preview[data-use-github-style] > :first-child { margin-top: 0px !important; }
.markdown-preview > :last-child, .markdown-preview[data-use-github-style] > :last-child { margin-bottom: 0px !important; }
.markdown-preview a:not([href]), .markdown-preview[data-use-github-style] a:not([href]) { color: inherit; text-decoration: none; }
.markdown-preview .absent, .markdown-preview[data-use-github-style] .absent { color: rgb(204, 0, 0); }
.markdown-preview .anchor, .markdown-preview[data-use-github-style] .anchor { position: absolute; top: 0px; left: 0px; display: block; padding-right: 6px; padding-left: 30px; margin-left: -30px; }
.markdown-preview .anchor:focus, .markdown-preview[data-use-github-style] .anchor:focus { outline: none; }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1, .markdown-preview h2, .markdown-preview[data-use-github-style] h2, .markdown-preview h3, .markdown-preview[data-use-github-style] h3, .markdown-preview h4, .markdown-preview[data-use-github-style] h4, .markdown-preview h5, .markdown-preview[data-use-github-style] h5, .markdown-preview h6, .markdown-preview[data-use-github-style] h6 { position: relative; margin-top: 1em; margin-bottom: 16px; font-weight: bold; line-height: 1.4; }
.markdown-preview h1 .octicon-link, .markdown-preview[data-use-github-style] h1 .octicon-link, .markdown-preview h2 .octicon-link, .markdown-preview[data-use-github-style] h2 .octicon-link, .markdown-preview h3 .octicon-link, .markdown-preview[data-use-github-style] h3 .octicon-link, .markdown-preview h4 .octicon-link, .markdown-preview[data-use-github-style] h4 .octicon-link, .markdown-preview h5 .octicon-link, .markdown-preview[data-use-github-style] h5 .octicon-link, .markdown-preview h6 .octicon-link, .markdown-preview[data-use-github-style] h6 .octicon-link { display: none; color: rgb(0, 0, 0); vertical-align: middle; }
.markdown-preview h1:hover .anchor, .markdown-preview[data-use-github-style] h1:hover .anchor, .markdown-preview h2:hover .anchor, .markdown-preview[data-use-github-style] h2:hover .anchor, .markdown-preview h3:hover .anchor, .markdown-preview[data-use-github-style] h3:hover .anchor, .markdown-preview h4:hover .anchor, .markdown-preview[data-use-github-style] h4:hover .anchor, .markdown-preview h5:hover .anchor, .markdown-preview[data-use-github-style] h5:hover .anchor, .markdown-preview h6:hover .anchor, .markdown-preview[data-use-github-style] h6:hover .anchor { padding-left: 8px; margin-left: -30px; text-decoration: none; }
.markdown-preview h1:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h1:hover .anchor .octicon-link, .markdown-preview h2:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h2:hover .anchor .octicon-link, .markdown-preview h3:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h3:hover .anchor .octicon-link, .markdown-preview h4:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h4:hover .anchor .octicon-link, .markdown-preview h5:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h5:hover .anchor .octicon-link, .markdown-preview h6:hover .anchor .octicon-link, .markdown-preview[data-use-github-style] h6:hover .anchor .octicon-link { display: inline-block; }
.markdown-preview h1 tt, .markdown-preview[data-use-github-style] h1 tt, .markdown-preview h2 tt, .markdown-preview[data-use-github-style] h2 tt, .markdown-preview h3 tt, .markdown-preview[data-use-github-style] h3 tt, .markdown-preview h4 tt, .markdown-preview[data-use-github-style] h4 tt, .markdown-preview h5 tt, .markdown-preview[data-use-github-style] h5 tt, .markdown-preview h6 tt, .markdown-preview[data-use-github-style] h6 tt, .markdown-preview h1 code, .markdown-preview[data-use-github-style] h1 code, .markdown-preview h2 code, .markdown-preview[data-use-github-style] h2 code, .markdown-preview h3 code, .markdown-preview[data-use-github-style] h3 code, .markdown-preview h4 code, .markdown-preview[data-use-github-style] h4 code, .markdown-preview h5 code, .markdown-preview[data-use-github-style] h5 code, .markdown-preview h6 code, .markdown-preview[data-use-github-style] h6 code { font-size: inherit; }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview h1 .anchor, .markdown-preview[data-use-github-style] h1 .anchor { line-height: 1; }
.markdown-preview h2, .markdown-preview[data-use-github-style] h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: rgb(238, 238, 238); }
.markdown-preview h2 .anchor, .markdown-preview[data-use-github-style] h2 .anchor { line-height: 1; }
.markdown-preview h3, .markdown-preview[data-use-github-style] h3 { font-size: 1.5em; line-height: 1.43; }
.markdown-preview h3 .anchor, .markdown-preview[data-use-github-style] h3 .anchor { line-height: 1.2; }
.markdown-preview h4, .markdown-preview[data-use-github-style] h4 { font-size: 1.25em; }
.markdown-preview h4 .anchor, .markdown-preview[data-use-github-style] h4 .anchor { line-height: 1.2; }
.markdown-preview h5, .markdown-preview[data-use-github-style] h5 { font-size: 1em; }
.markdown-preview h5 .anchor, .markdown-preview[data-use-github-style] h5 .anchor { line-height: 1.1; }
.markdown-preview h6, .markdown-preview[data-use-github-style] h6 { font-size: 1em; color: rgb(119, 119, 119); }
.markdown-preview h6 .anchor, .markdown-preview[data-use-github-style] h6 .anchor { line-height: 1.1; }
.markdown-preview p, .markdown-preview[data-use-github-style] p, .markdown-preview blockquote, .markdown-preview[data-use-github-style] blockquote, .markdown-preview ul, .markdown-preview[data-use-github-style] ul, .markdown-preview ol, .markdown-preview[data-use-github-style] ol, .markdown-preview dl, .markdown-preview[data-use-github-style] dl, .markdown-preview table, .markdown-preview[data-use-github-style] table, .markdown-preview pre, .markdown-preview[data-use-github-style] pre { margin-top: 0px; margin-bottom: 16px; }
.markdown-preview hr, .markdown-preview[data-use-github-style] hr { height: 4px; padding: 0px; margin: 16px 0px; border: 0px none; background-color: rgb(231, 231, 231); }
.markdown-preview ul, .markdown-preview[data-use-github-style] ul, .markdown-preview ol, .markdown-preview[data-use-github-style] ol { padding-left: 2em; }
.markdown-preview ul.no-list, .markdown-preview[data-use-github-style] ul.no-list, .markdown-preview ol.no-list, .markdown-preview[data-use-github-style] ol.no-list { padding: 0px; list-style-type: none; }
.markdown-preview ul ul, .markdown-preview[data-use-github-style] ul ul, .markdown-preview ul ol, .markdown-preview[data-use-github-style] ul ol, .markdown-preview ol ol, .markdown-preview[data-use-github-style] ol ol, .markdown-preview ol ul, .markdown-preview[data-use-github-style] ol ul { margin-top: 0px; margin-bottom: 0px; }
.markdown-preview li > p, .markdown-preview[data-use-github-style] li > p { margin-top: 16px; }
.markdown-preview dl, .markdown-preview[data-use-github-style] dl { padding: 0px; }
.markdown-preview dl dt, .markdown-preview[data-use-github-style] dl dt { padding: 0px; margin-top: 16px; font-size: 1em; font-style: italic; font-weight: bold; }
.markdown-preview dl dd, .markdown-preview[data-use-github-style] dl dd { padding: 0px 16px; margin-bottom: 16px; }
.markdown-preview blockquote, .markdown-preview[data-use-github-style] blockquote { padding: 0px 15px; color: rgb(119, 119, 119); border-left-width: 4px; border-left-style: solid; border-left-color: rgb(221, 221, 221); }
.markdown-preview blockquote > :first-child, .markdown-preview[data-use-github-style] blockquote > :first-child { margin-top: 0px; }
.markdown-preview blockquote > :last-child, .markdown-preview[data-use-github-style] blockquote > :last-child { margin-bottom: 0px; }
.markdown-preview table, .markdown-preview[data-use-github-style] table { display: block; width: 100%; overflow: auto; word-break: keep-all; }
.markdown-preview table th, .markdown-preview[data-use-github-style] table th { font-weight: bold; }
.markdown-preview table th, .markdown-preview[data-use-github-style] table th, .markdown-preview table td, .markdown-preview[data-use-github-style] table td { padding: 6px 13px; border: 1px solid rgb(221, 221, 221); }
.markdown-preview table tr, .markdown-preview[data-use-github-style] table tr { border-top-width: 1px; border-top-style: solid; border-top-color: rgb(204, 204, 204); background-color: rgb(255, 255, 255); }
.markdown-preview table tr:nth-child(2n), .markdown-preview[data-use-github-style] table tr:nth-child(2n) { background-color: rgb(248, 248, 248); }
.markdown-preview img, .markdown-preview[data-use-github-style] img { max-width: 100%; box-sizing: border-box; }
.markdown-preview .emoji, .markdown-preview[data-use-github-style] .emoji { max-width: none; }
.markdown-preview span.frame, .markdown-preview[data-use-github-style] span.frame { display: block; overflow: hidden; }
.markdown-preview span.frame > span, .markdown-preview[data-use-github-style] span.frame > span { display: block; float: left; width: auto; padding: 7px; margin: 13px 0px 0px; overflow: hidden; border: 1px solid rgb(221, 221, 221); }
.markdown-preview span.frame span img, .markdown-preview[data-use-github-style] span.frame span img { display: block; float: left; }
.markdown-preview span.frame span span, .markdown-preview[data-use-github-style] span.frame span span { display: block; padding: 5px 0px 0px; clear: both; color: rgb(51, 51, 51); }
.markdown-preview span.align-center, .markdown-preview[data-use-github-style] span.align-center { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-center > span, .markdown-preview[data-use-github-style] span.align-center > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: center; }
.markdown-preview span.align-center span img, .markdown-preview[data-use-github-style] span.align-center span img { margin: 0px auto; text-align: center; }
.markdown-preview span.align-right, .markdown-preview[data-use-github-style] span.align-right { display: block; overflow: hidden; clear: both; }
.markdown-preview span.align-right > span, .markdown-preview[data-use-github-style] span.align-right > span { display: block; margin: 13px 0px 0px; overflow: hidden; text-align: right; }
.markdown-preview span.align-right span img, .markdown-preview[data-use-github-style] span.align-right span img { margin: 0px; text-align: right; }
.markdown-preview span.float-left, .markdown-preview[data-use-github-style] span.float-left { display: block; float: left; margin-right: 13px; overflow: hidden; }
.markdown-preview span.float-left span, .markdown-preview[data-use-github-style] span.float-left span { margin: 13px 0px 0px; }
.markdown-preview span.float-right, .markdown-preview[data-use-github-style] span.float-right { display: block; float: right; margin-left: 13px; overflow: hidden; }
.markdown-preview span.float-right > span, .markdown-preview[data-use-github-style] span.float-right > span { display: block; margin: 13px auto 0px; overflow: hidden; text-align: right; }
.markdown-preview code, .markdown-preview[data-use-github-style] code, .markdown-preview tt, .markdown-preview[data-use-github-style] tt { padding: 0.2em 0px; margin: 0px; font-size: 85%; border-radius: 3px; background-color: rgba(0, 0, 0, 0.0392157); }
.markdown-preview code::before, .markdown-preview[data-use-github-style] code::before, .markdown-preview tt::before, .markdown-preview[data-use-github-style] tt::before, .markdown-preview code::after, .markdown-preview[data-use-github-style] code::after, .markdown-preview tt::after, .markdown-preview[data-use-github-style] tt::after { letter-spacing: -0.2em; content: " "; }
.markdown-preview code br, .markdown-preview[data-use-github-style] code br, .markdown-preview tt br, .markdown-preview[data-use-github-style] tt br { display: none; }
.markdown-preview del code, .markdown-preview[data-use-github-style] del code { text-decoration: inherit; }
.markdown-preview pre > code, .markdown-preview[data-use-github-style] pre > code { padding: 0px; margin: 0px; font-size: 100%; word-break: normal; white-space: pre; border: 0px; background: transparent; }
.markdown-preview .highlight, .markdown-preview[data-use-github-style] .highlight { margin-bottom: 16px; }
.markdown-preview .highlight pre, .markdown-preview[data-use-github-style] .highlight pre, .markdown-preview pre, .markdown-preview[data-use-github-style] pre { padding: 16px; overflow: auto; font-size: 85%; line-height: 1.45; border-radius: 3px; background-color: rgb(247, 247, 247); }
.markdown-preview .highlight pre, .markdown-preview[data-use-github-style] .highlight pre { margin-bottom: 0px; word-break: normal; }
.markdown-preview pre, .markdown-preview[data-use-github-style] pre { word-wrap: normal; }
.markdown-preview pre code, .markdown-preview[data-use-github-style] pre code, .markdown-preview pre tt, .markdown-preview[data-use-github-style] pre tt { display: inline; max-width: initial; padding: 0px; margin: 0px; overflow: initial; line-height: inherit; word-wrap: normal; border: 0px; background-color: transparent; }
.markdown-preview pre code::before, .markdown-preview[data-use-github-style] pre code::before, .markdown-preview pre tt::before, .markdown-preview[data-use-github-style] pre tt::before, .markdown-preview pre code::after, .markdown-preview[data-use-github-style] pre code::after, .markdown-preview pre tt::after, .markdown-preview[data-use-github-style] pre tt::after { content: normal; }
.markdown-preview kbd, .markdown-preview[data-use-github-style] kbd { display: inline-block; padding: 3px 5px; font-size: 11px; line-height: 10px; color: rgb(85, 85, 85); vertical-align: middle; border-style: solid; border-width: 1px; border-color: rgb(204, 204, 204) rgb(204, 204, 204) rgb(187, 187, 187); border-radius: 3px; box-shadow: rgb(187, 187, 187) 0px -1px 0px inset; background-color: rgb(252, 252, 252); }
.markdown-preview, .markdown-preview[data-use-github-style], .markdown-preview code, .markdown-preview[data-use-github-style] code { color: rgb(51, 51, 51); }
.markdown-preview h1, .markdown-preview[data-use-github-style] h1, .markdown-preview h2, .markdown-preview[data-use-github-style] h2, .markdown-preview h3, .markdown-preview[data-use-github-style] h3, .markdown-preview h4, .markdown-preview[data-use-github-style] h4, .markdown-preview h5, .markdown-preview[data-use-github-style] h5, .markdown-preview h6, .markdown-preview[data-use-github-style] h6 { -webkit-font-smoothing: antialiased; cursor: text; }
.markdown-preview > h1:first-child, .markdown-preview[data-use-github-style] > h1:first-child, .markdown-preview > h1:first-child + h2, .markdown-preview[data-use-github-style] > h1:first-child + h2, .markdown-preview > h2:first-child, .markdown-preview[data-use-github-style] > h2:first-child, .markdown-preview > h3:first-child, .markdown-preview[data-use-github-style] > h3:first-child, .markdown-preview > h4:first-child, .markdown-preview[data-use-github-style] > h4:first-child, .markdown-preview > h5:first-child, .markdown-preview[data-use-github-style] > h5:first-child, .markdown-preview > h6:first-child, .markdown-preview[data-use-github-style] > h6:first-child { margin-top: 0px; padding-top: 0px; }
.markdown-preview a, .markdown-preview[data-use-github-style] a, .markdown-preview a code, .markdown-preview[data-use-github-style] a code { color: rgb(65, 131, 196); }
.markdown-preview a:first-child h1, .markdown-preview[data-use-github-style] a:first-child h1, .markdown-preview a:first-child h2, .markdown-preview[data-use-github-style] a:first-child h2, .markdown-preview a:first-child h3, .markdown-preview[data-use-github-style] a:first-child h3, .markdown-preview a:first-child h4, .markdown-preview[data-use-github-style] a:first-child h4, .markdown-preview a:first-child h5, .markdown-preview[data-use-github-style] a:first-child h5, .markdown-preview a:first-child h6, .markdown-preview[data-use-github-style] a:first-child h6 { margin-top: 0px; padding-top: 0px; }
.markdown-preview h1 + p, .markdown-preview[data-use-github-style] h1 + p, .markdown-preview h2 + p, .markdown-preview[data-use-github-style] h2 + p, .markdown-preview h3 + p, .markdown-preview[data-use-github-style] h3 + p, .markdown-preview h4 + p, .markdown-preview[data-use-github-style] h4 + p, .markdown-preview h5 + p, .markdown-preview[data-use-github-style] h5 + p, .markdown-preview h6 + p, .markdown-preview[data-use-github-style] h6 + p { margin-top: 0px; }
.markdown-preview li p.first, .markdown-preview[data-use-github-style] li p.first { display: inline-block; }
.markdown-preview ul, .markdown-preview[data-use-github-style] ul { list-style-type: disc; }
.markdown-preview ol, .markdown-preview[data-use-github-style] ol { list-style-type: decimal; }
.markdown-preview ul li > :first-child, .markdown-preview[data-use-github-style] ul li > :first-child, .markdown-preview ol li > :first-child, .markdown-preview[data-use-github-style] ol li > :first-child, .markdown-preview ul li ul:first-of-type, .markdown-preview[data-use-github-style] ul li ul:first-of-type, .markdown-preview ol li ul:first-of-type, .markdown-preview[data-use-github-style] ol li ul:first-of-type { margin-top: 0px; }
.markdown-preview ol > li, .markdown-preview[data-use-github-style] ol > li { list-style-type: inherit; }
.markdown-preview ul > li, .markdown-preview[data-use-github-style] ul > li { list-style-type: inherit; }
.markdown-preview dl dt:first-child, .markdown-preview[data-use-github-style] dl dt:first-child { padding: 0px; }
.markdown-preview dl dt > :first-child, .markdown-preview[data-use-github-style] dl dt > :first-child { margin-top: 0px; }
.markdown-preview dl dt > :last-child, .markdown-preview[data-use-github-style] dl dt > :last-child { margin-bottom: 0px; }
.markdown-preview dl dd > :first-child, .markdown-preview[data-use-github-style] dl dd > :first-child { margin-top: 0px; }
.markdown-preview dl dd > :last-child, .markdown-preview[data-use-github-style] dl dd > :last-child { margin-bottom: 0px; }
.markdown-preview blockquote p, .markdown-preview[data-use-github-style] blockquote p { font-size: 16px; line-height: 1.5; }
.markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { padding: 16px; overflow: auto; font-size: 84%; line-height: 1.45; border-radius: 3px; background-color: rgb(250, 250, 250); }
.markdown-preview pre, .markdown-preview[data-use-github-style] pre, .markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { margin-bottom: 16px; word-break: normal; }
.markdown-preview pre, .markdown-preview[data-use-github-style] pre, .markdown-preview code, .markdown-preview[data-use-github-style] code, .markdown-preview tt, .markdown-preview[data-use-github-style] tt, .markdown-preview pre.editor-colors, .markdown-preview[data-use-github-style] pre.editor-colors { font-family: Consolas, 'Liberation Mono', Courier, monospace; }
.markdown-preview .emoji, .markdown-preview[data-use-github-style] .emoji { height: 20px; width: 20px; }
.markdown-preview del, .markdown-preview[data-use-github-style] del { text-decoration: none; position: relative; }
.markdown-preview del::after, .markdown-preview[data-use-github-style] del::after { border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: black; content: ""; left: 0px; position: absolute; right: 0px; top: 50%; }
.markdown-preview .flash, .markdown-preview[data-use-github-style] .flash { animation: flash 1s ease-out 1; outline: rgba(255, 0, 0, 0) solid 1px; }
.markdown-preview .flash:not(li), .markdown-preview[data-use-github-style] .flash:not(li) { display: block; }
.markdown-preview.markdown-preview { font-size: 10pt; }
.bracket-matcher .region {
  border-bottom: 1px dotted lime;
  position: absolute;
}

.spell-check-misspelling .region {
  border-bottom: 2px dotted rgba(255, 51, 51, 0.75);
}

.gutter .line-number {
  background-size: 0px;
  transition: background-size 0.5s;
}
.gutter .line-number.quickfix {
  background-image: url(atom://atom-typescript/images/light-bulb.png);
  background-size: 16.66666667px;
  background-repeat: no-repeat;
  background-position: right center;
}

pre.editor-colors,
.host {
  background-color: #fafafa;
  color: #383a42;
}
pre.editor-colors .line.cursor-line,
.host .line.cursor-line {
  background-color: rgba(56, 58, 66, 0.04);
}
pre.editor-colors .invisible,
.host .invisible {
  color: #383a42;
}
pre.editor-colors .cursor,
.host .cursor {
  border-left: 2px solid #526fff;
}
pre.editor-colors .selection .region,
.host .selection .region {
  background-color: #ededed;
}
pre.editor-colors .bracket-matcher .region,
.host .bracket-matcher .region {
  border-bottom: 1px solid #526fff;
  box-sizing: border-box;
}
pre.editor-colors .invisible-character,
.host .invisible-character {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .indent-guide,
.host .indent-guide {
  color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .wrap-guide,
.host .wrap-guide {
  background-color: rgba(56, 58, 66, 0.2);
}
pre.editor-colors .gutter .line-number,
.host .gutter .line-number {
  color: #9d9d9f;
  -webkit-font-smoothing: antialiased;
}
pre.editor-colors .gutter .line-number.cursor-line,
.host .gutter .line-number.cursor-line {
  color: #4d5375;
  background-color: #f2f2f2;
}
pre.editor-colors .gutter .line-number.cursor-line-no-selection,
.host .gutter .line-number.cursor-line-no-selection {
  background-color: transparent;
}
pre.editor-colors .gutter .line-number .icon-right,
.host .gutter .line-number .icon-right {
  color: #383a42;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed.git-line-removed::before {
  bottom: -3px;
}
pre.editor-colors .gutter:not(.git-diff-icon) .line-number.git-line-removed::after,
.host .gutter:not(.git-diff-icon) .line-number.git-line-removed::after {
  content: "";
  position: absolute;
  left: 0px;
  bottom: 0px;
  width: 25px;
  border-bottom: 1px dotted rgba(255, 20, 20, 0.5);
  pointer-events: none;
}
pre.editor-colors .gutter .line-number.folded,
.host .gutter .line-number.folded,
pre.editor-colors .gutter .line-number:after,
.host .gutter .line-number:after,
pre.editor-colors .fold-marker:after,
.host .fold-marker:after {
  color: #4d5375;
}
.comment {
  color: #a0a1a7;
  font-style: italic;
}
.entity.name.type {
  color: #c18401;
}
.entity.other.inherited-class {
  color: #50a14f;
}
.keyword {
  color: #a626a4;
}
.keyword.control {
  color: #a626a4;
}
.keyword.operator {
  color: #383a42;
}
.keyword.other.special-method {
  color: #4078f2;
}
.keyword.other.unit {
  color: #986801;
}
.storage {
  color: #a626a4;
}
.storage.type.annotation,
.storage.type.primitive {
  color: #a626a4;
}
.storage.modifier.package,
.storage.modifier.import {
  color: #383a42;
}
.constant {
  color: #986801;
}
.constant.variable {
  color: #986801;
}
.constant.character.escape {
  color: #0184bc;
}
.constant.numeric {
  color: #986801;
}
.constant.other.color {
  color: #0184bc;
}
.constant.other.symbol {
  color: #0184bc;
}
.variable {
  color: #e45649;
}
.variable.interpolation {
  color: #ca1243;
}
.variable.parameter {
  color: #383a42;
}
.string {
  color: #50a14f;
}
.string.regexp {
  color: #0184bc;
}
.string.regexp .source.ruby.embedded {
  color: #c18401;
}
.string.other.link {
  color: #e45649;
}
.punctuation.definition.comment {
  color: #a0a1a7;
}
.punctuation.definition.method-parameters,
.punctuation.definition.function-parameters,
.punctuation.definition.parameters,
.punctuation.definition.separator,
.punctuation.definition.seperator,
.punctuation.definition.array {
  color: #383a42;
}
.punctuation.definition.heading,
.punctuation.definition.identity {
  color: #4078f2;
}
.punctuation.definition.bold {
  color: #c18401;
  font-weight: bold;
}
.punctuation.definition.italic {
  color: #a626a4;
  font-style: italic;
}
.punctuation.section.embedded {
  color: #ca1243;
}
.punctuation.section.method,
.punctuation.section.class,
.punctuation.section.inner-class {
  color: #383a42;
}
.support.class {
  color: #c18401;
}
.support.type {
  color: #0184bc;
}
.support.function {
  color: #0184bc;
}
.support.function.any-method {
  color: #4078f2;
}
.entity.name.function {
  color: #4078f2;
}
.entity.name.class,
.entity.name.type.class {
  color: #c18401;
}
.entity.name.section {
  color: #4078f2;
}
.entity.name.tag {
  color: #e45649;
}
.entity.other.attribute-name {
  color: #986801;
}
.entity.other.attribute-name.id {
  color: #4078f2;
}
.meta.class {
  color: #c18401;
}
.meta.class.body {
  color: #383a42;
}
.meta.method-call,
.meta.method {
  color: #383a42;
}
.meta.definition.variable {
  color: #e45649;
}
.meta.link {
  color: #986801;
}
.meta.require {
  color: #4078f2;
}
.meta.selector {
  color: #a626a4;
}
.meta.separator {
  background-color: #373b41;
  color: #383a42;
}
.meta.tag {
  color: #383a42;
}
.none {
  color: #383a42;
}
.invalid.deprecated {
  color: #000000 !important;
  background-color: #f2a60d !important;
}
.invalid.illegal {
  color: #ffffff !important;
  background-color: #ff1414 !important;
}
.markup.bold {
  color: #986801;
  font-weight: bold;
}
.markup.changed {
  color: #a626a4;
}
.markup.deleted {
  color: #e45649;
}
.markup.italic {
  color: #a626a4;
  font-style: italic;
}
.markup.heading .punctuation.definition.heading {
  color: #4078f2;
}
.markup.inserted {
  color: #50a14f;
}
.markup.list {
  color: #e45649;
}
.markup.quote {
  color: #986801;
}
.markup.raw {
  color: #50a14f;
}
.source.cs .keyword.operator {
  color: #a626a4;
}
.source.css .property-name,
.source.css .property-value {
  color: #696c77;
}
.source.css .property-name.support,
.source.css .property-value.support {
  color: #383a42;
}
.source.gfm .markup {
  -webkit-font-smoothing: auto;
}
.source.gfm .markup.heading {
  color: #e45649;
}
.source.gfm .markup.link {
  color: #a626a4;
}
.source.gfm .link .entity {
  color: #4078f2;
}
.source.ini .keyword.other.definition.ini {
  color: #e45649;
}
.source.java .storage.modifier.import {
  color: #c18401;
}
.source.java .storage.type {
  color: #c18401;
}
.source.java-properties .meta.key-pair {
  color: #e45649;
}
.source.java-properties .meta.key-pair > .punctuation {
  color: #383a42;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json {
  color: #e45649;
}
.source.json .meta.structure.dictionary.json > .string.quoted.json > .punctuation.string {
  color: #e45649;
}
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json,
.source.json .meta.structure.dictionary.json > .value.json > .string.quoted.json > .punctuation,
.source.json .meta.structure.array.json > .value.json > .string.quoted.json > .punctuation {
  color: #50a14f;
}
.source.json .meta.structure.dictionary.json > .constant.language.json,
.source.json .meta.structure.array.json > .constant.language.json {
  color: #0184bc;
}
.source.ruby .constant.other.symbol > .punctuation {
  color: inherit;
}
.source.python .keyword.operator.logical.python {
  color: #a626a4;
}
.source.python .variable.parameter {
  color: #986801;
}
</style>
  </head>
  <body class='markdown-preview'><h1 id="introduction-to-backbone-js">Introduction to Backbone.js</h1>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li>Overview</li>
<li>Backbone Events</li>
<li>Backbone Models</li>
<li>Backbone Collections</li>
<li>Backbone Views</li>
<li>Backbone Routing</li>
<li>Syncing Models and Collections</li>
<li>Conclusion</li>
</ul>
<h2 id="course-objectives">Course Objectives</h2>
<ol>
<li>Understand the primary purpose of Backbone and the web development problems that it solves</li>
<li>Explore the basics of the five core objects of Backbone: Models, Collections, Views, Routers, and Events</li>
<li>Interact with each object type observing how they work and understanding why they work the way they do</li>
<li>Know when and how to utilize each object within a web application</li>
</ol>
<h2 id="overview">Overview</h2>
<p>Backbone is a JavaScript library the allows developers to create rich client-side web applications without locking them in to an opinionated framework that limits their choices concerning templates, data binding, web components, and other aspects of an application&#39;s structure.  Because Backbone is not strongly opinionated, and it provides only a few of the capabilities needed for a single page application, it&#39;s called a library not a framework. Frameworks, such as Angular or Ember, provide more built-in features than Backbone.js, but do so at the cost of freedom and flexibility thereby making them more opinionated.</p>
<p>Backbone provides five basic building blocks to your application: models, collections, views, routing and events. In the course, we will learn and explore each of these component independently and in relation to each other.</p>
<p>To use Backbone, two JavaScript files need to be included in your web page.  They can be referenced from a CDN as follows:</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Content&nbsp;Delivery&nbsp;Network&nbsp;(CDN)&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag script html"><span>script</span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span>&nbsp;&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="markup underline link https hyperlink"><span>https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.7.0/underscore.js</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span class="punctuation definition tag html"><span>&lt;/</span></span><span class="entity name tag script html"><span>script</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span><span>&nbsp;</span></span></div><div class="line"><span class="text html basic"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag script html"><span>script</span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span>&nbsp;&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="markup underline link https hyperlink"><span>https://cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone.js</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span class="punctuation definition tag html"><span>&lt;/</span></span><span class="entity name tag script html"><span>script</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span><span>&nbsp;</span></span></div></pre>
<p>Or, from a local server folder in the web application.</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Web&nbsp;Application&nbsp;Folders&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>script</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>libs/underscore.js</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>script</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>script</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>libs/backbone.js</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>script</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div></pre>
<p>Underscore is the only hard dependency required by Backbone.  Underscore is a very useful library for working with objects, arrays, collections and such.  Even if the web application does not use Backbone, using the Underscore library often proves to be very helpful.</p>
<p>Underscore.js is written and maintained by the same author of Backbone.js, Jeremy Ashkenas. He distributes them as separate libraries so developers can use the functionality of Underscore.js without Backbone.js.  Sometimes this is misrepresented as Backbone.js having external dependencies when really that is not a fair description.</p>
<p>To learn more about Underscore, browse to the following web site: <a href="http://underscorejs.org/">http://underscorejs.org/</a>.</p>
<p>To learn more about Backbone, browse to the following web site: <a href="http://backbonejs.org/">http://backbonejs.org/</a>.</p>
<p>To learn more about Jeremy, visit his Github page: <a href="https://github.com/jashkenas">https://github.com/jashkenas</a>.</p>
<p>Additionally, there are two JavaScript libraries that are commonly used with Backbone to facilitate DOM selection and manipulation, AJAX calls and better template services.  For DOM selection and manipulation as well as AJAX calls, jQuery is generally included as shown:</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Content&nbsp;Delivery&nbsp;Network&nbsp;(CDN)&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag script html"><span>script</span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span>&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="markup underline link https hyperlink"><span>https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.js</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span class="punctuation definition tag html"><span>&lt;/</span></span><span class="entity name tag script html"><span>script</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span><span>&nbsp;</span></span></div></pre>
<p>Or, from a local server folder in the web application.</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Web&nbsp;Application&nbsp;Folders&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>script</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>libs/jquery.js</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>script</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div></pre>
<p>While Underscore provides a basic template engine, many developers prefer to use the Handlebars template engine. The template engine used in this course will be Handlebars. To include Handlebars, add a script reference to your HTML file as shown:</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Content&nbsp;Delivery&nbsp;Network&nbsp;(CDN)&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag script html"><span>script</span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span>&nbsp;&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="markup underline link https hyperlink"><span>https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.0/handlebars.js</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="source js embedded html"><span class="punctuation definition tag html"><span>&lt;/</span></span><span class="entity name tag script html"><span>script</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span><span>&nbsp;</span></span></div></pre>
<p>Or, from a local server folder in the web application.</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Web&nbsp;Application&nbsp;Folders&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>script</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>src</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>libs/handlebars.js</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>script</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div></pre>
<h2 id="events">Events</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand the purpose of Backbone Events</li>
<li>Learn how to create objects that inherit from Backbone.Events</li>
<li>Explore how to trigger and handle custom events</li>
<li>Explore how to listen for events on other objects</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>Events are a very popular feature of Backbone. The Events object enables objects, such as objects based on Backbone.Model, to respond to events triggered internally by Backbone.Events or to custom events triggered by application logic.</p>
<h3 id="add-events-to-any-object">Add Events to Any Object</h3>
<p>In addition to using events with Backbone.Model objects, Backbone.Events can be added to any object. To add Backbone.Events to an object, the <strong>_.extend</strong> function provided by the Underscore library is used.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;bankAccount&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;balance</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>0</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>deposit</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>amt</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>balance&nbsp;</span><span class="keyword operator js"><span>+=</span></span><span>&nbsp;amt</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>withdraw</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>amt</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>balance&nbsp;</span><span class="keyword operator js"><span>-=</span></span><span>&nbsp;amt</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>_</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span>bankAccount</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Events</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>After calling the <strong>_.extend</strong> function, the <strong>bankAccount</strong> object now has full support for Backbone events.</p>
<h3 id="creating-custom-events">Creating Custom Events</h3>
<p>To create a custom event, simply use the <strong>trigger</strong> method to trigger the desired event by name.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>withdraw</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>amt</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>balance&nbsp;</span><span class="keyword operator js"><span>-=</span></span><span>&nbsp;amt</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;not&nbsp;enough&nbsp;money</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>amt&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>0</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>trigger</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;balance</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>balance</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>withdraw&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;withdraw</span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how the implementation of the <strong>withdraw</strong> function, calls the <strong>trigger</strong> function provided by the Backbone.Events object prototype to trigger a custom event on the object. Once the event is trigger it then has to be handled.</p>
<h3 id="handling-custom-events">Handling Custom Events</h3>
<p>To handle an event using Backbone.Events, the <strong>on</strong> method is used. Simply, pass in the name of the event as well as a handler function, when the event is triggered using the <strong>trigger</strong> function, the event handler will be invoked with an argument from the event being passed in.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>e</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>dir</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Account&nbsp;was&nbsp;overdrawn&nbsp;by&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;e</span><span class="meta delimiter method period js"><span>.</span></span><span>balance</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>deposit</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>100</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>withdraw</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Here is the output of the above code.</p>
<pre class="editor-colors lang-text"><div class="line"><span class="text plain"><span class="meta paragraph text"><span>Account&nbsp;was&nbsp;overdrawn&nbsp;by&nbsp;-100</span></span></span></div></pre>
<p>An interesting side note is that the <strong>on</strong> (and its corresponding <strong>off</strong> function described in the next section) is the common name for functions registering event handlers.  Not only does Backbone use this function name but so do other libraries like jQuery.</p>
<h3 id="removing-event-handlers">Removing Event Handlers</h3>
<p>To remove event handlers, the <strong>off</strong> function must be called, with the name of the event and a reference to the function being passed in as arguments.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>accountOverdrawn</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>e</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>dir</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Account&nbsp;was&nbsp;overdrawn&nbsp;by&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;e</span><span class="meta delimiter method period js"><span>.</span></span><span>balance</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;accountOverdrawn</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>deposit</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>100</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>withdraw</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>off</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;accountOverdrawn</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how in the earlier <strong>on</strong> example in the previous section, the event handler function was passed inline into the <strong>on</strong> function.  This approach is sufficient, if we do not intend to remove the event handler.  If we intend to remove the handler, then we need to define the handler as a named function, and the pass it as an argument to both the <strong>on</strong> and <strong>off</strong> function.</p>
<p>Additionally, all event handlers for a particular event can be removed by simply specifying the name of the event and not passing a specific event handler function.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>off</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Occasionally, there will be a special situation where you want to attach an event handler to execute one time and then have the handler removed after the first execution of it. This scenario can be accomplished with the <strong>once</strong> function.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>accountOverdrawn</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>e</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>dir</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Account&nbsp;was&nbsp;overdrawn&nbsp;by&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;e</span><span class="meta delimiter method period js"><span>.</span></span><span>balance</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>once</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;accountOverdrawn</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>deposit</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>100</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>withdraw</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>By using the <strong>once</strong> function, the <strong>accountOverdrawn</strong> event handler will only be executed when the first <strong>overdrawn</strong> event is triggered.</p>
<h3 id="listening-to-events-on-other-objects">Listening to Events on Other Objects</h3>
<p>One additional and useful capability of the Backbone.Events object is that one object can listen to the events of other objects.  The <strong>listenTo</strong> function is used to listen to the events of another object. The function accepts three parameters: the object to listen to, the event to listen to and the event handler.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;dashboard&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>_</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span>dashboard</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Events</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>dashboard</span><span class="meta delimiter method period js"><span>.</span></span><span>listenTo</span><span class="meta brace round js"><span>(</span></span><span>bankAccount</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>e</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>dir</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Dashboard:&nbsp;Account&nbsp;was&nbsp;overdrawn&nbsp;by&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;e</span><span class="meta delimiter method period js"><span>.</span></span><span>balance</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>deposit</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>100</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>bankAccount</span><span class="meta delimiter method period js"><span>.</span></span><span>withdraw</span><span class="meta brace round js"><span>(</span></span><span class="constant numeric js"><span>200</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how the <strong>dashboard</strong> object listens to the <strong>bankAccount</strong> object by registering an event handler for the <strong>overdrawn</strong> event.  When the <strong>bankAccount</strong> object triggers the <strong>overdrawn</strong> event, the <strong>dashboard</strong> object will be through the execution of the event handler function that it registered.</p>
<h3 id="removing-event-listeners-for-other-objects">Removing Event Listeners for Other Objects</h3>
<p>There are three ways in which an object can stop listening to an event.  All three ways use the <strong>stopListening</strong> function.  Observe the examples of using the <strong>stopListening</strong> function below.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>dashboard</span><span class="meta delimiter method period js"><span>.</span></span><span>stopListening</span><span class="meta brace round js"><span>(</span></span><span>bankAccount</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>dashboard</span><span class="meta delimiter method period js"><span>.</span></span><span>stopListening</span><span class="meta brace round js"><span>(</span></span><span>bankAccount</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>dashboard</span><span class="meta delimiter method period js"><span>.</span></span><span>stopListening</span><span class="meta brace round js"><span>(</span></span><span>bankAccount</span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>overdrawn</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;dashboardAccountOverdrawn</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The first usage of <strong>stopListening</strong> removes all event handlers for all events from the object. The second usage of <strong>stopListening</strong> removes all event handlers for a specific event from the object. The third usage of <strong>stopListening</strong> removes a specific event handler for a specific event from the object.</p>
<h3 id="exercise">Exercise</h3>
<p><strong>Step 1.</strong> With a text editor, open the file <strong>index.js</strong> file from folder <strong>exercises/events/js</strong>.</p>
<p><strong>Step 2.</strong> Using an object literal, create a new object named car.  The object should have a property named <strong>speed</strong> and a property named <strong>drive</strong>.  Initialize speed to <strong>0</strong> and <strong>drive</strong> to be a function that accepts one parameter named <strong>newSpeed</strong>.  Assign <strong>newSpeed</strong> to the object&#39;s <strong>speed</strong> property in the function implementation.</p>
<p><strong>Step 3.</strong> Using the Underscore <strong>extend</strong> function, copy the properties of the <strong>Backbone.Events</strong> object to the <strong>car</strong> object.</p>
<p><strong>Step 4.</strong> When the <strong>newSpeed</strong> is above 80, trigger a custom event named <strong>toofast</strong> passing in the speed and how high it is over 80. When the <strong>newSpeed</strong> is below 50, trigger a custom event named <strong>tooslow</strong> passing in the speed and how much it is lower than 50.  Both custom events should output the actual speed to the console.</p>
<p><strong>Step 5.</strong> Open the file <strong>exercises/events/index.html</strong> from the file system with the web browser of your choice. Open the JavaScript Console (it&#39;s part of the Developer Tools for the browser).</p>
<p><strong>Step 6.</strong> Call the <strong>drive</strong> function on the <strong>car</strong> object, passing in a value of 65. Reload the web page. Are any events triggered? Is there any output to the console?</p>
<p><strong>Step 7.</strong> Call the <strong>drive</strong> function on the <strong>car</strong> object, passing in a value of 85. Reload the web page. Are any events triggered? Is there any output to the console?</p>
<p><strong>Step 8.</strong> Call the <strong>drive</strong> function on the <strong>car</strong> object, passing in a value of 45. Reload the web page. Are any events triggered? Is there any output to the console?</p>
<h4 id="congrats-you-have-completed-the-exercise-">Congrats you have completed the exercise!</h4>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>What is the purpose of the Backbone.Events object?</li>
<li>Does the Backbone.Model object inherit from the Backbone.Events object?</li>
<li>Can Backbone.Events be used with objects other than Backbone objects?</li>
<li>Can custom events be configured with Backbone.Events?</li>
</ol>
<h2 id="backbone-models">Backbone Models</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand the purpose of Backbone Models</li>
<li>Learn how to create a model that inherits from Backbone.Model</li>
<li>Explore how to work with attributes, functions and events with models.</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>All software applications contain data: data for managing the application itself and data for the user&#39;s business or other processes. There are many kinds of data depending upon which part of the application is being considered. There is data which is permanently stored in files or databases. Also, there is data that is stored in various caching mechanisms such as caching services or cache objects. When people think of data they usually think about data such as financial transactions, inventory data, personnel data, and such. In addition to this kind of data, there is also data that is used to manage the application itself such as user logins and passwords, application settings, data connection strings, and such.</p>
<p>User interface libraries like Backbone provide a mechanisms for storing, manipulating and synchronizing data.  In Backbone, the mechanism by which data is stored is through the <strong>Model</strong> object.  The <strong>Model</strong> object is extended for each kind of data that needs to be stored.  Various functions and attributes can be added to these models to store and manipulate the data appropriate to the kind of data being stored. Additionally, Backbone Models support <strong>Events</strong> allowing the changing of data to be observed, and responded to, by other portions of the applications that are interested in those changes.</p>
<p>To create a new model with Backbone, the core Backbone.Model object needs to be extended. Extending the model creates a new object that prototypally inherits from the base Backbone.Model object.  To create a new model, review the code below</p>
<h3 id="create-a-new-model">Create a New Model</h3>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Once the Person model object is created, then a new instance of the Person can be created using the <strong>new</strong> operator.</p>
<h3 id="model-initialization">Model Initialization</h3>
<p>Backbone models provide two properties that can be used to initialize the module: initialize and constructor. The initialize function allows for default model attribute values to be set as well as perform other initialization code.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The second initialization property is the constructor property, and it overrides the default constructor function for the object. The constructor function serves the same general purpose as the initialize function, except the base constructor must be called, if you want it to be executed.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>constructor</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The call to <strong>Backbone.Model.apply</strong>, calls the base Backbone.Model constructor passing in the arguments that were passed to the new constructor function.</p>
<p>A final, and frequently used option, for setting default attribute values is as follows.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;defaults</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The <strong>defaults</strong> option allows an object to specified that will specify the default value for each attributed.</p>
<h3 id="model-attributes">Model Attributes</h3>
<p>A common operation performed on models is the getting and setting of attributes.  Attributes represent the data of the model, and are accessed via the <strong>get</strong> and <strong>set</strong> functions provided by the Backbone.Model object prototype.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>constructor</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Smith</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe the two ways in which the <strong>set</strong> method may be called.  In the first instance, the <strong>set</strong> method is called with two arguments: name of the attribute and the new value of the attribute.  The <strong>set</strong> method will assign the new value to the named attributed for the model. The second <strong>set</strong> method call accepts an object as a parameter. The object is simply an object map of the model attributes and values that need to be set. Calling set once with an object map is more efficient than calling set multiple times, once for each attribute.</p>
<p>Also, model attributes can set when the model is instantiated.  Observe the code below.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Smith</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The attributes <strong>firstName</strong> and <strong>lastName</strong> will be set to the values passed in.</p>
<h3 id="model-ids">Model Ids</h3>
<p>There is a special attribute that can be set on the model named <strong>id</strong>.  The following code demonstrates how to set it.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;id</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Smith</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Unlike other attributes, the special <strong>id</strong> attribute, can be retrieved like this.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;personId&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>id</span></span></span></div></pre>
<p>The <strong>id</strong> serves as a unique identifier for the model. It&#39;s very useful for retrieving models from collections. In some cases, the name of the <strong>id</strong> attribute may need to be changed. To use a different property for the <strong>id</strong> value of the model, the following option can be set.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;idAttribute</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>_id</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The property name <strong>_id</strong> is a common <strong>id</strong> property name used by MongoDB.  To simplify development, developers typically configure Backbone.js models to use the <strong>_id</strong> name for the <strong>attribute</strong> to make working with both Backbone.js and MongoDB easier.</p>
<p>Typically, the <strong>id</strong> value is determined by the permanent storage for the model data. Permanent storage, such as a relational database, usually assigns a unique identifier to the model. Therefore, the <strong>id</strong> is usually not directly set by the JavaScript code.</p>
<h3 id="model-functions">Model Functions</h3>
<p>In addition to attributes, function properties can be added to models too. Functions provide logic for calculating values based upon property attributes, attribute validation, etc...  The logic implemented by a function can either be user interface logic or business logic. Implementing a function is very simple as demonstrated below using the function <strong>getFullName</strong>.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>constructor</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>getFullName</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Smith</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>getFullName</span><span class="meta brace round js"><span>(</span><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Once the model is created, and it&#39;s attributes have meaningful values, the function is called as a property of the model itself and its operations are performed.</p>
<h3 id="model-events">Model Events</h3>
<p>Backbone models can be configured to respond to events. Events can include many of the builtin events such as when an attribute is changed, or they can be custom events that are triggered by custom user interface logic. Custom events are covered later in the course.</p>
<p>To configure an event handler, the <strong>on</strong> method is used. The <strong>on</strong> method is provided by the <strong>Backbone.Events</strong> object. The <strong>Backbone.Model</strong> object extends the <strong>Backbone.Events</strong> object.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>constructor</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>getFullName</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>on</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>change:firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>model</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>firstName</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>first&nbsp;name&nbsp;changed</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>model</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>firstName</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPerson</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The <strong>on</strong> method above sets an event handler function for when the <strong>firstName</strong> attribute is changed.  The event handler is passed the specific model object as well as the property value that was changed.</p>
<h3 id="model-validation">Model Validation</h3>
<p>Backbone.js provides the ability to valid model data through the use of the <strong>validate</strong> property. Consider the following Person model:</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;Person&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;defaults</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;age</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant numeric js"><span>0</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>validate</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>attrs</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>attrs</span><span class="meta delimiter method period js"><span>.</span></span><span>age&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>13</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Sorry,&nbsp;you&nbsp;are&nbsp;too&nbsp;young&nbsp;to&nbsp;sign&nbsp;up&nbsp;with&nbsp;this&nbsp;web&nbsp;site.</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The <strong>validate</strong> function will be executed when the model&#39;s <strong>save</strong> function is executed (requires the sync option to be configured which is beyond the scope of this course). To manually invoke the <strong>validate</strong> function, call the <strong>set</strong> function with the following option.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;p&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>p</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>age</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="constant numeric js"><span>12</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;validate</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Passing the <strong>validation</strong> option set to <strong>true</strong> will cause the <strong>validate</strong> function to execute when the value is set. When the <strong>validate</strong> function executes, it should only return a value if the model is invalid. Otherwise, the function should return nothing. The value returned from the <strong>validate</strong> function will be accessible on the <strong>validationError</strong> property.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>p</span><span class="meta delimiter method period js"><span>.</span></span><span>validationError</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>This value can be a string, as shown in the example code, but its not limited to being a string. Any kind of value or object can be returned. A common scenario is to return an array of validation errors to be displayed in the web page.</p>
<p>Finally, when a model fails validation, the <strong>invalid</strong> event is triggered.  Using the <strong>on</strong> function, an event handler can be attached to the model to handle the <strong>invalid</strong> event.  A common event handler would hook into the UI and display the validation error messages.</p>
<h3 id="exercise">Exercise</h3>
<p><strong>Step 1.</strong> With a text editor, open the file <strong>index.js</strong> file from folder <strong>exercises/models/js</strong>.</p>
<p><strong>Step 2.</strong> Create a new model named <strong>Widget</strong> that inherits from <strong>Backbone.Model</strong>.</p>
<p><strong>Step 3.</strong> Using the <strong>defaults</strong> property, to set default values for the model attributes named <strong>name</strong>, <strong>description</strong>, <strong>size</strong> and <strong>color</strong>. The default value for each attribute is an empty string.</p>
<p><strong>Step 4.</strong> Add a function to the Model named <strong>getLongDescription</strong>. The function should return a value of the four attributes concatenated together with a space between each value.</p>
<p><strong>Step 5.</strong> Instantiate a new model, and assign it to a variable named <strong>aWidget</strong>.</p>
<p><strong>Step 6.</strong> Setup an event on the new model to output the new <strong>color</strong> value to the console each time the <strong>color</strong> attribute is modified.</p>
<p><strong>Step 7.</strong> Set each attribute to a realistic value. When the color attribute is set make sure the new value is outputted to the console.</p>
<p><strong>Step 8.</strong> Call the <strong>getLongDescription</strong> function on the model and output the value to the console.</p>
<p><strong>Step 9.</strong> Open the file <strong>exercises/models/index.html</strong> from the file system with the web browser of your choice. Open the JavaScript Console (it&#39;s part of the Developer Tools for the browser). Reload the page, and observe the output to the console.</p>
<h4 id="congrats-you-have-completed-the-exercise-">Congrats you have completed the exercise!</h4>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>What is the purpose of Backbone models?</li>
<li>What is the difference between the initialize function and the constructor function?</li>
<li>What two methods are used retrieve and change the values of attributes?</li>
<li>What method is used to register event handlers for model events?</li>
</ol>
<h2 id="backbone-collections">Backbone Collections</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand the purpose of Backbone Collections</li>
<li>Learn how to create a collection that inherits from Backbone.Collection</li>
<li>Explore how to add a model to and remove a model from a collections</li>
<li>Explore how to iterate over collections</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>The Backbone.Collection object provides the functionality needed to manage many model objects as a list or collection.</p>
<h3 id="create-a-new-collection">Create a New Collection</h3>
<p>To create a new collection, the Backbone.Collection object needs to be extended.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;People&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Collection</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;model</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;Person</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;myPeople&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>People</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The <strong>extend</strong> function configures the <strong>People</strong> object to prototypally inherit from the Backbone.Collection object. To use the People collection, a new instance of the People collection object needs to be instantiated with the <strong>new</strong> operator.</p>
<h3 id="adding-items-to-a-collection">Adding Items to a Collection</h3>
<p>An empty collection is of little value, so models must be created, and added to the collection. To add a model to the collection, the <strong>add</strong> function is called.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>John</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Doe</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Jane</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Doe</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how the <strong>add</strong> function is used to add a model to the collection.</p>
<h3 id="removing-items-from-a-collection">Removing Items from a Collection</h3>
<p>In addition to adding items to a collection, items can be removed from a collection as well. The function to remove an item is named <strong>remove</strong>.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;aPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>Person</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>John</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Doe</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>add</span></span><span class="meta brace round js"><span>(</span></span><span>aPerson</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span>remove</span><span class="meta brace round js"><span>(</span></span><span>aPerson</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe, how the item is removed from the collection based upon the object&#39;s reference.</p>
<h3 id="retrieving-an-item-from-a-collection">Retrieving an Item from a Collection</h3>
<p>To retrieve an item from a collection using an <strong>id</strong>, the <strong>get</strong> function can be used.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;aPerson&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span>personId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how the model id is passed into the <strong>get</strong> function and the model is returned.</p>
<h3 id="iterating-over-a-collection">Iterating over a Collection</h3>
<p>A common operation for collections is to iterate over the collection, and process each item.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>myPeople</span><span class="meta delimiter method period js"><span>.</span></span><span>each</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>person</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>person</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Using the <strong>each</strong> function provided by the Underscore library (as exposed by the Backbone.Collection object), the code can iterate over the collection, passing each item in the collection into a function, where some kind of logic can be applied to the item.</p>
<h3 id="exercise">Exercise</h3>
<p><strong>Step 1.</strong> With a text editor, open the file <strong>index.js</strong> file from folder <strong>exercises/collections/js</strong>.</p>
<p><strong>Step 2.</strong> Copy the Widget model from the previous exercise into the <strong>index.js</strong> file.  Add an <strong>id</strong> attribute to the model if one does not exist.</p>
<p><strong>Step 3.</strong> Create a new collection object named Widgets that inherits from the Backbone.Collection object.</p>
<p><strong>Step 4.</strong> Configure the collection to the use the Widget model.</p>
<p><strong>Step 5.</strong> Instantiate a new Widgets collection named <strong>theWidgets</strong>.</p>
<p><strong>Step 5.</strong> Create five new Widget objects and add them to the <strong>theWidgets</strong> collection.  For each Widget, specify reasonable values.</p>
<p><strong>Step 6.</strong> Iterate over the <strong>theWidgets</strong> collection, calling the <strong>getLongDescription</strong> function, outputting the value to the console.</p>
<p><strong>Step 7.</strong> Remove the third Widget object from the collection.</p>
<p><strong>Step 8.</strong> Iterate over the collection of Widget models again, calling the <strong>getLongDescription</strong> function, outputting the value to the console.</p>
<p><strong>Step 9.</strong> Open the file <strong>exercises/collections/index.html</strong> from the file system with the web browser of your choice. Open the JavaScript Console (it&#39;s part of the Developer Tools for the browser). Reload the page, and observe the output to the console.</p>
<h4 id="congrats-you-have-completed-the-exercise-">Congrats you have completed the exercise!</h4>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>What is the purpose of Backbone collections?</li>
<li>What function is used to define a new Backbone collection object?</li>
<li>What function is used to iterate over a collection?</li>
</ol>
<h2 id="views">Views</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand the purpose of Backbone Views</li>
<li>Learn how to create a view that inherits from Backbone.View</li>
<li>Explore how to add a template engine and events to a view</li>
<li>Explore how to instantiate and configure a view</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>Backbone provides the <strong>Backbone.View</strong> object to define a structure for providing the user interface of the application&#39;s model and collection data, including wiring up and handling user interface events such as a button click. Unlike other JavaScript libraries and frameworks, Backbone&#39;s View object is not opinionated about which template system to use or whether to support two-way data binding. Backbone Views allow the developer to choose what is best for the application.</p>
<h3 id="create-an-underscore-js-template">Create an Underscore.js Template</h3>
<p>The default template engine use by Backbone.js is the Underscore.js template engine provided by Underscore.js. The Underscore.js template engine is a string based template engine that provides very few features. However, it is an extremely fast, and easy to use template engine.</p>
<p>The Underscore <strong>template</strong> function compiles the template producing a template function. A data object is then passed into the template function and results in a string of HTML filled in with actual data. This string is then added to the DOM.</p>
<p>Underscore template commands are wrapped in one of three sets of command brackets:</p>
<p><strong>&lt;%= someVariableOrExpressionToOutput %&gt;</strong> - this will output an interpolated non-escaped HTML string value</p>
<p><strong>&lt;%- someVariableOrExpressionToOutput -%&gt;</strong> - this will output an interpolated escaped HTML string value</p>
<p><strong>&lt;% javascriptCodeToExecute %&gt;</strong> - this executes some JavaScript, and can be used with multi-line constructs like <strong>if</strong> statements and <strong>for</strong> loops</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;data&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Smith</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;htmlTemplate&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;%=&nbsp;firstName&nbsp;%&gt;&nbsp;&lt;%=&nbsp;lastName&nbsp;%&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;templateFn&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;_</span><span class="meta delimiter method period js"><span>.</span></span><span>template</span><span class="meta brace round js"><span>(</span></span><span>htmlTemplate</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;htmlOutput&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;templateFn</span><span class="meta brace round js"><span>(</span></span><span>data</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The variable <strong>htmlOutput</strong> would contain the final HTML with both the data applied to template.</p>
<h3 id="create-a-handlebars-template">Create a Handlebars Template</h3>
<p>One of the more common template engine libraries is called Handlebars. In order to use Handlebars, the Handlebars JavaScript library needs to be included as described in the course introduction.</p>
<p>The following <strong>SCRIPT</strong> element contains the definition of a Handlebars template.  Observe the <strong>id</strong> and <strong>type</strong> attributes on the <strong>SCRIPT</strong> element.  The <strong>id</strong> attribute will be used to load the template, and the <strong>type</strong> attribute informs the browsers to <strong>NOT</strong> execute the <strong>SCRIPT</strong> block as JavaScript.</p>
<pre class="editor-colors lang-html"><div class="line"><span class="text html basic"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag script html"><span>script</span></span><span class="text embedded html"><span>&nbsp;</span><span class="meta attribute-with-value id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>person-view</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>type</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>text/x-handlebars-template</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>h2</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>View&nbsp;Person</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>h2</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>label</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>First&nbsp;Name:</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>label</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{firstName}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>label</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Last&nbsp;Name:</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>label</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>{{lastName}}</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>button&nbsp;edit</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>Edit</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></span></div><div class="line"><span class="text html basic"><span class="text embedded html"><span class="punctuation definition tag html"><span>&lt;/</span></span><span class="entity name tag script html"><span>script</span></span></span><span class="punctuation definition tag html"><span>&gt;</span></span><span>&nbsp;</span></span></div></pre>
<p>The following code takes the <strong>person-view</strong> template and applies the Handlebars template engine to it. The template process goes through five steps.  First, the template is retrieved. Second, the template is compiled. The result of the compilation is a function. Third, the data to be bound to the template is prepared. Next, the data model is passed into the template function. Finally, the result of the template function is the HTML to be added to the DOM.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;HTML&nbsp;cannot&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;body&nbsp;until&nbsp;the&nbsp;DOM&nbsp;is&nbsp;loaded</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="support class js"><span>window</span></span><span class="meta delimiter method period js"><span>.</span></span><span>addEventListener</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>DOMContentLoaded</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Step&nbsp;1:&nbsp;Get&nbsp;the&nbsp;Template&nbsp;HTML&nbsp;Source</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;source&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>person-view</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>innerHTML</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Step&nbsp;2:&nbsp;Compile&nbsp;the&nbsp;Template</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;template&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Handlebars</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>compile</span></span><span class="meta brace round js"><span>(</span></span><span>source</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Step&nbsp;3:&nbsp;Setup&nbsp;Data&nbsp;Model</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;context&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;firstName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Bob</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;lastName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Jones</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Step&nbsp;4:&nbsp;Apply&nbsp;Data&nbsp;Model&nbsp;to&nbsp;the&nbsp;Template</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;html&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;template</span><span class="meta brace round js"><span>(</span></span><span>context</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Step&nbsp;5:&nbsp;Replace&nbsp;Body&nbsp;Content&nbsp;with&nbsp;Data-Bound&nbsp;Template</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>body</span></span><span class="meta delimiter method period js"><span>.</span></span><span>innerHTML&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;html</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<h3 id="create-a-view">Create a View</h3>
<p>To create a new view, Backbone.View needs to be extended as shown below. This will allow the new view to prototypally inherit from the Backbone.View object.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;PersonView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>View</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;tagName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>div</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The <strong>tagName</strong> property defines the HTML element tag that will wrap the view when it is rendered. If no tag name is specified, the default value is a <strong>div</strong> element.</p>
<h3 id="add-template-engine-to-a-view">Add Template Engine to a View</h3>
<p>Once a new view object has been defined, a template engine needs to be added to it. As mentioned earlier, Backbone gives you full control over which template engine the application uses. In this example, the Handlebars template engine is being used.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;PersonView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>View</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;tagName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>div</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;id</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>person-view</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;source&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>id</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>innerHTML</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>template&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Handlebars</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>compile</span></span><span class="meta brace round js"><span>(</span></span><span>source</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>render</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>render</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;html&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>template</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>attributes</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>$el</span><span class="meta delimiter method period js"><span>.</span></span><span>html</span><span class="meta brace round js"><span>(</span></span><span>html</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe the <strong>initialize</strong> and <strong>render</strong> functions added to the view object.  The <strong>initialize</strong> function is being used to load the template source and compile it into a template function. Then the initialize function fires off the render function.</p>
<p>The render function uses the <strong>template</strong> function to pass in the <strong>model</strong> which then generates the HTML. The HTML is added to the DOM through a call to the <strong>html</strong> function of the jQuery wrapped DOM element accessed through the property <strong>$el</strong>.  The <strong>$el</strong> property is set through the <strong>el</strong> property where the raw DOM element is set when instantiating a new view.  The setting of the <strong>el</strong> property on the view will be covered in a few sections from now.</p>
<h3 id="add-events-to-a-view">Add Events to a View</h3>
<p>In addition to displaying data bound to a template, views are used to handle user interface events such as button clicks. The <strong>events</strong> option is an object map that uses a property to determine which event will be listened for and a selector to determine on which DOM elements will be listening.  The value of the object map property is the name of the function object property defined on the view object. Once the rendering process is complete, the events are applied to the live DOM elements.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;PersonView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>View</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;tagName</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>div</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;events</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>click&nbsp;.button.edit</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>edit</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;id</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>person-view</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;source&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="support class js"><span>document</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>getElementById</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>id</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>innerHTML</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>template&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Handlebars</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>compile</span></span><span class="meta brace round js"><span>(</span></span><span>source</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>render</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>render</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;html&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>template</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>model</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>attributes</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>$el</span><span class="meta delimiter method period js"><span>.</span></span><span>html</span><span class="meta brace round js"><span>(</span></span><span>html</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>edit</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>dir</span></span><span class="meta brace round js"><span>(</span></span><span>arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe the <strong>edit</strong> button event configuration.  In the template there is <strong>button</strong> element with the classes, <strong>button</strong> and <strong>edit</strong>, applied to it. When the view runs, the DOM selector specified in the events object will be used to select the button element and the <strong>edit</strong> function will be bound to its <strong>click</strong> event.</p>
<p>Events configured with the events hash can be activated and deactivated with the <strong>delegateEvents</strong> and <strong>undelegateEvents</strong> functions. If no events hash is passed into the <strong>delegateEvents</strong>, then the <strong>events</strong> option hash on the view is used.</p>
<h3 id="using-the-view">Using the View</h3>
<p>To use the view, a new instance of it must be created using the <strong>new</strong> operator. An object is passed into the constructor function to set various options.  In this case, the <strong>el</strong> option and the <strong>model</strong> option are being set.  The <strong>el</strong> option is the DOM element to which the view content is going to appended as a child in the DOM. The <strong>model</strong> option specifies the model the view is going to be bound to.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;HTML&nbsp;cannot&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;body&nbsp;until&nbsp;the&nbsp;DOM&nbsp;is&nbsp;loaded</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="support class js"><span>window</span></span><span class="meta delimiter method period js"><span>.</span></span><span>addEventListener</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>DOMContentLoaded</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;personModel&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>PersonModel</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;personModel</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>firstName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Eric</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;personModel</span><span class="meta delimiter method period js"><span>.</span></span><span>set</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>lastName</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Greene</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;personView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>PersonView</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;$</span><span class="meta brace round js"><span>(</span></span><span class="support class js"><span>document</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>body</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;model</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;personModel</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Because the <strong>render</strong> method is wired up to the <strong>initialize</strong> function (see earlier code samples), once the view is instantiated, the template will be compiled, the model data will be passed to the template function, and the resulting HTML string will be added to the DOM.  After the render function executes, the events will be wired up to the specified DOM elements for the events they are specified for.</p>
<h3 id="destroying-the-view">Destroying the View</h3>
<p>When a view needs to be disposed, a number of actions are needed; otherwise, memory leaks can occur. First, events bound to the view need to be cleaned up. Event bindings that are not removed will result in web browser memory leaks. These leaks occur because the DOM and JavaScript represent two different contexts in the web browser. Each has their own memory space, their own garbage collector and are truly different subsystems. Many developers think that DOM objects are JavaScript objects in memory, but they are not.  DOM objects are C++ objects, while the DOM API allows web developers to manipulate these C++ objects through a JavaScript API.</p>
<p>The <strong>View</strong> object provides a remove function that will remove the view&#39;s DOM tree from the DOM, and it cleans up all events registered with the <strong>events</strong> option on the view object.  Any events not registered with the <strong>events</strong> option will need to manually cleaned up.</p>
<p>Review the code to remove a view:</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>personView</span><span class="meta delimiter method period js"><span>.</span></span><span>remove</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Unfortunately, the <strong>remove</strong> method does not trigger a <strong>remove</strong> Backbone event that the developer can bind to execute custom view removal logic. Therefore, for a view with custom DOM event bindings (not using the <strong>events</strong> options) or for views requiring additional clean up logic, a good solution is to override the remove method on view prototype.  The following code demonstrates how to implement such logic.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;CustomView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>View</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>remove</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;Custom&nbsp;removal&nbsp;code&nbsp;goes&nbsp;here...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>View</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>prototype</span></span><span class="meta delimiter method period js"><span>.</span></span><span>remove</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The view framework of Backbone.js provides a solid foundation for managing views, while offering a tremendous amount of flexibility for how the details of the view are actually implemented.</p>
<h3 id="exercise">Exercise</h3>
<p><strong>Step 1.</strong> With a text editor, open the file <strong>index.js</strong> file from folder <strong>exercises/views/js</strong>.</p>
<p><strong>Step 2.</strong> Create a new view named <strong>WidgetView</strong> that inherits from <strong>Backbone.View</strong>.</p>
<p><strong>Step 3.</strong> Set the tag name for the view to <strong>div</strong>.</p>
<p><strong>Step 4.</strong> Create an <strong>initialize</strong> function to load the template with an <strong>id</strong> of <strong>widget-view</strong>.</p>
<p><strong>Step 5.</strong> Compile the template within the initialize function assigning it to a view property named <strong>template</strong>, then call the <strong>render</strong> function.</p>
<p><strong>Step 6.</strong> Implement the render function to call the view&#39;s <strong>template</strong> function, passing in the model object. Append the HTML returned by the <strong>template</strong> function to DOM.</p>
<p><strong>Step 7.</strong> Copy the Widget model from the Backbone Model exercise.  Instantiate a new Widget model, assign reasonable values to its attributes.</p>
<p><strong>Step 8.</strong> Instantiate a new Widget View, passing in the Widget model and the <strong>document.body</strong> for DOM element the view will be appended to.</p>
<p><strong>Step 9.</strong> Open the file <strong>exercises/views/index.html</strong> from the file system with the web browser of your choice. The Widget View will appear populated with widget data. If the Widget View does not appear, review your code, and make any needed adjustments.</p>
<h4 id="congrats-you-have-completed-the-exercise-">Congrats you have completed the exercise!</h4>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>What are Backbone Views?</li>
<li>Does Backbone require that the application use a particular template engine?</li>
<li>What view object function is used to generate the HTML for the template?</li>
<li>Can Backbone Views be configured to handle events?</li>
</ol>
<h2 id="routing">Routing</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand the purpose of Backbone Routing</li>
<li>Learn how to create a router that inherits from Backbone.Router</li>
<li>Explore how to add a routes, and functions to handle those routes</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>Routing is the mechanism by which a web application decides which view to show based upon some kind of condition. The condition typically used by web applications to determine routes is the current URL or some kind of internal state.  Additionally, routing can be done on the web server or on the web browser client.  Server-side frameworks such as ASP.Net MVC or Java&#39;s Spring MVC offer server side routing mechanisms.  Backbone offers URL-based client side routing through the Backbone.Router object.</p>
<h3 id="creating-a-router">Creating a Router</h3>
<p>As with the earlier examples, to create a new router object, the Backbone.Router object must be extended.  Additionally, an initialize function has been provided to pass along any options that passed into the router.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>PersonRouter&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Router</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;options</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<h3 id="defining-routes">Defining Routes</h3>
<p>Once a new router object has been created to prototypally inherit from the Backbone.Router object, then the routes need to be defined. The routes are defined on the <strong>routes</strong> property on the router object.  The <strong>routes</strong> property is an object map where the property name is the URL route pattern and the property value is the name of the function on the router object that will be called when changing to a route.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>PersonRouter&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Router</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;routes</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>person/:id</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>viewPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>person/:id/edit</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>editPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>people</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>showPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>showPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;options</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>In the URL pattern, observe the <strong>:id</strong> portion of the pattern. This represents the portion of the URL that will be passed in as an <strong>id</strong> parameter to the route function.</p>
<p>Once the routes are defined, the functions named in the <strong>routes</strong> object map needed to be defined on the <strong>PersonRouter</strong> object.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>PersonRouter&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Router</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;routes</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>person/:id</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>viewPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>person/:id/edit</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>editPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>people</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>showPeople</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>showPerson</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>viewPerson</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>id</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>undelegateEvents</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>ViewPersonView</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span class="meta delimiter method period js"><span>.</span></span><span>el</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;people</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span>id</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>render</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>editPerson</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>id</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>undelegateEvents</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>EditPersonView</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span class="meta delimiter method period js"><span>.</span></span><span>el</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;people</span><span class="meta delimiter method period js"><span>.</span></span><span>get</span><span class="meta brace round js"><span>(</span></span><span>id</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>render</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>showPeople</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>undelegateEvents</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>PeopleView</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span class="meta delimiter method period js"><span>.</span></span><span>el</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collection</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;people</span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;router</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="variable language js"><span>this</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span>currentView</span><span class="meta delimiter method period js"><span>.</span></span><span>render</span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>initialize</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable language js"><span>this</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>options</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;options</span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Observe how each route function instantiates a new view object, passing the DOM element to append the view to as well as the model data for the view.</p>
<p>For the routing system to begin working on the web page, a new instance of the router object needs to instantiated. Additionally, Backbone needs to be told to start paying attention to the URL so it can change routes. The code to do this is as follows.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;router&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>PersonRouter</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;$</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>body</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>history</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>start</span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>pushState</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>It is recommended to place this code inside of a function that fires when the DOM is loaded. This is easily done with jQuery&#39;s <strong>$(document).ready</strong> function.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>$</span><span class="meta brace round js"><span>(</span></span><span class="support class js"><span>document</span></span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>ready</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;router&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>WidgetsRouter</span></span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;el</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;$</span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>body</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>history</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>start</span></span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span><span>pushState</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>When the DOM is fully loaded, the router object will be created and Backbone will be told to start paying attention to the URL.</p>
<h3 id="viewing-a-route">Viewing a Route</h3>
<p>To view a route from using the route definitions from above the following URLs would be used.</p>
<p><a href="http://www.mysite.com/">http://www.mysite.com/</a> - displays the list of people</p>
<p><a href="http://www.mysite.com/people">http://www.mysite.com/people</a> - displays the list of people</p>
<p><a href="http://www.mysite.com/person/1">http://www.mysite.com/person/1</a> - displays the person with an id of 1</p>
<p><a href="http://www.mysite.com/person/1/edit">http://www.mysite.com/person/1/edit</a> - display an edit form for the person with an id of 1</p>
<h3 id="exercise">Exercise</h3>
<p><strong>Step 1.</strong> With a text editor, open the file <strong>index.js</strong> file from folder <strong>exercises/routes/js</strong>.</p>
<p><strong>Step 2.</strong> Create a new router object named <strong>WidgetsRouter</strong> that inherits from <strong>Backbone.Router</strong>.</p>
<p><strong>Step 3.</strong> Add a route property with the following defined routes.</p>
<p>1st Route: <strong>widget/:id</strong> will be handled by <strong>viewWidget</strong>
2nd Route: <strong>widget/:id/edit</strong> will be handled by <strong>editWidget</strong>
3rd Route: <strong>widgets</strong> will be handled by <strong>viewWidgets</strong>
4th Route: <strong>[empty string]</strong> will be handled by <strong>viewWidgets</strong></p>
<p><strong>Step 4.</strong> Implement the function <strong>viewWidget</strong> with the <strong>ViewWidgetView</strong> view object to display the view with the specified model.  Note: <strong>ViewWidgetView</strong> is already defined within the exercise files. You do not need to implement the view object itself.</p>
<p><strong>Step 5.</strong> Implement the function <strong>editWidget</strong> with the <strong>EditWidgetView</strong> view object to display the view with the specified model.  Note: <strong>EditWidgetView</strong> is already defined within the exercise files. You do not need to implement the view object itself.</p>
<p><strong>Step 6.</strong> Implement the function <strong>viewWidgets</strong> with the <strong>WidgetsView</strong> view object to display the view with the specified model.  Note: <strong>WidgetsView</strong> is already defined within the exercise files. You do not need to implement the view object itself.</p>
<p><strong>Step 7.</strong> Instantiate a new <strong>WidgetsRouter</strong> object, passing the a jQuery wrapped <strong>BODY</strong> element as the value for <strong>el</strong>. Be sure to run this code after the DOM has been loaded.</p>
<p><strong>Step 8.</strong> Open the file <strong>exercises/routes/index.html</strong> from the file system with the web browser of your choice. Using the links on the web page, navigate between the web pages.</p>
<h4 id="congrats-you-have-completed-the-exercise-">Congrats you have completed the exercise!</h4>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>What is the purpose of the Backbone.Router object?</li>
<li>Does Backbone.Routers use state based routing or URL based routing?</li>
<li>What is the format for parameters that are extracted from the URL?</li>
<li>Is Backbone routing server-side or client-side routing?</li>
</ol>
<h2 id="syncing-models-and-collections">Syncing Models and Collections</h2>
<h3 id="objectives">Objectives</h3>
<ol>
<li>Understand JavaScript&#39;s Single-Threaded Model and Asynchronous Programming</li>
<li>Explore the XMLHttpRequest Object and the concept of AJAX</li>
<li>Utilize the model and collection AJAX synchronization capabilities provided by Backbone.js</li>
</ol>
<h3 id="introduction">Introduction</h3>
<p>JavaScript is a single-threaded, event-driven programming language. It&#39;s execution model is event driven whereby jobs (aka tasks) are executed on an event loop. Before being pushed on to the event loop, jobs are stored in one of several queues with varying scheduling priorities. While some kinds of jobs are assigned to higher priority queues than other kinds of jobs, once a job has been pushed on to the event loop, JavaScript will execute that job without interruption until it is complete. Completing the job without interruption means that no matter the length of time it takes to execute the job, JavaScript will execute it until it is done. This means that even for a long running job, JavaScript will not swap tasks to complete other jobs. Tying in JavaScript&#39;a single-threaded natures, means there is no thread switching either.</p>
<p>JavaScript is described as event-driven because it is driven by jobs that are executed in response to some kind of event. Common events in a web application include button clicks, dragging and dropping as well as AJAX calls using the XMLHttpRequest object.  When these events occur, the event handler registered for the event is the job pushed on to the event loop.  The function, and all of the functions it will execute, represent the complete job that will be executed without interruption.</p>
<p>While JavaScript is single-threaded, it is surrounded by an environment that is not single-threaded. Web browsers are made of many components such as the DOM, networking, etc... These other components of the web browser are usually programmed in C++ (or another multi-threaded language) and are capable of more sophisticated execution models. JavaScript interacts with these components in a single-theaded asynchronous manner, while the components themselves operate in a multi-threaded manner. To better understand this model, it helps to think of JavaScript as glue language for C++ modules. To enable JavaScript efficiently operate asynchronously, two programming patterns are utilized: callback functions and closures. Callback functions allow JavaScript to make a function call asynchronously.</p>
<p>To illustrate, JavaScript code calls a API function provided by the browser, passing a callback function to the API call.  The API function is really a C++ web browser component that will perform some kind of asynchronous operation. After the call is made, JavaScript immediately moves onto the next instruction on its stack, allowing the C++ code to executes its operations on another thread. Once the C++ web browser component completes its operations, it will call the push the callback function on to the event loop passing in the result data from its operations.</p>
<p>This pattern allows JavaScript to keep executing while other components do the heavy lifting of executing CPU intensive and IO intensive operations. Finally, in order for the callback function to have a reference to the original variable used in the original JavaScript task that requested the asynchronous API function call, closures are used. To see a great example of this let&#39;s consider an AJAX call made with jQuery&#39;s $.ajax function.</p>
<h3 id="jquery-ajax-calls">jQuery AJAX calls</h3>
<p>Most web developers have experience making AJAX calls with jQuery&#39;s <strong>ajax</strong> function. While jQuery provides a promise-based interface, almost all developers are familiar with the older style <strong>success</strong> and <strong>error</strong> functions. From the developer perspective, jQuery&#39;s <strong>ajax</strong> function makes the AJAX call, then when the response from the server is received the <strong>success</strong> function is invoked passing in the data received from the server.  Or if an error occurred (as determined by the response code from the server), the error function is invoked passing in the error information. Review the code below:</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>$</span><span class="meta delimiter method period js"><span>.</span></span><span>ajax</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>POST</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>/api/widgets</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;contentType</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>application/json</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>success</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>data</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>jqXHR</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>textStatus</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;process&nbsp;the&nbsp;data</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>error</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>jqXHR</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>textStatus</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>errorThrown</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;handle&nbsp;the&nbsp;error</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>Many developers intuitively think of this code as being synchronous in nature even if they know its asynchronous. Behind the scenes the following takes place. The call to jQuery&#39;s <strong>ajax</strong> function causes the browser to instantiate an XHR object. The options needed to make the request are passed to the XHR object, and it&#39;s send function is invoked to make the request. The send function immediately returns control back to JavaScript and the rest of the JavaScript job on the event loop is completed.</p>
<p>While JavaScript continues executing jobs on its single-thread, the web browser&#39;s C++ components execute the actual network call on another thread. When the response is received, the XHR object triggers the success/error function passed in from the original jQuery <strong>ajax</strong> function. The function is triggered by pushing it on the event loop, where it is executed as a separate job from the original call. Through the use of closures, the original function can reference the original variables that were available in the scope of the original jQuery <strong>ajax</strong> call.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>getWidget</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>widgetId</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;the&nbsp;call&nbsp;to&nbsp;the&nbsp;AJAX&nbsp;function&nbsp;occurs&nbsp;within&nbsp;one&nbsp;job,&nbsp;and&nbsp;the&nbsp;results</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;will&nbsp;processed&nbsp;in&nbsp;a&nbsp;future&nbsp;job</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;$</span><span class="meta delimiter method period js"><span>.</span></span><span>ajax</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>GET</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;url</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>/api/widgets/</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;encodeURIComponent</span><span class="meta brace round js"><span>(</span></span><span>widgetId</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contentType</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>application/json</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>success</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>data</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>jqXHR</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>textStatus</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;even&nbsp;though&nbsp;this&nbsp;function&nbsp;is&nbsp;running&nbsp;is&nbsp;a&nbsp;completely</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;different&nbsp;job&nbsp;on&nbsp;the&nbsp;event&nbsp;loop,&nbsp;the&nbsp;widgetId&nbsp;variable</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;is&nbsp;available&nbsp;via&nbsp;closure</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name type object js console"><span>console</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>log</span></span><span class="meta brace round js"><span>(</span></span><span>widgetId</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>error</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>jqXHR</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>textStatus</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>errorThrown</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>JavaScript&#39;s asynchronous programming ability is actually quite powerful when used for non-blocking I/O purposes such as AJAX calls.</p>
<h3 id="backbone-sync">Backbone Sync</h3>
<p>Backbone encapsulates the XHR mechanisms for keeping objects synchronized with the server through its <strong>sync</strong> function. The synchronizing process uses jQuery&#39;s low-level <strong>ajax</strong> function to make AJAX calls through the browser&#39;s <strong>XMLHttpRequest (XHR)</strong> object.  Backbone expects the server to implement the standard REST service pattern corresponding to the models and collections that are being synchronized (this standard pattern can be overridden, AJAX and sync function customizations are described later).</p>
<p>The pattern is as follows:</p>
<ul>
<li><p>Get All Models in a Collection</p>
<ul>
<li>HTTP Method: GET</li>
<li>URL Pattern: /collection-name</li>
<li>Request Body: None</li>
</ul>
</li>
<li><p>Get One Model in a Collection</p>
<ul>
<li>HTTP Method: GET<ul>
<li>URL Pattern: /collection-name/model-id</li>
<li>Request Body: None</li>
</ul>
</li>
</ul>
</li>
<li><p>Create a New Model</p>
<ul>
<li>HTTP Method: POST</li>
<li>URL Pattern: /collection-name</li>
<li>Request Body: JSON data containing new model</li>
</ul>
</li>
<li><p>Update the Whole Existing Model</p>
<ul>
<li>HTTP Method: PUT</li>
<li>URL Pattern: /collection-name/model-id</li>
<li>Request Body: JSON data contains the updated model, the id in the model is ignore, and the id from URL is used to determine which model should be updated</li>
</ul>
</li>
<li><p>Update Some Fields of an Existing Model</p>
<ul>
<li>HTTP Method: PATCH<ul>
<li>URL Pattern: /collection-name/model-id</li>
<li>Request Body: JSON data contains the fields of the model to be updated (id should not be included), and the id from URL is used to determine which model should be updated</li>
</ul>
</li>
</ul>
</li>
<li><p>Delete One Model</p>
<ul>
<li>HTTP Method: DELETE<ul>
<li>URL Pattern: /collection-name/model-id</li>
<li>Request Body: None</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The <strong>sync</strong> function exposes access to the REST service operations through the following function signature:</p>
<p><strong>Backbone.sync(method, model [, options])</strong></p>
<p>The following values for <strong>method</strong> are supported:</p>
<ul>
<li>&quot;create&quot; - POST request which creates a new model</li>
<li>&quot;read&quot; - GET request which reads a model or a collection of models</li>
<li>&quot;update&quot; - PUT or PATCH request which updates a model</li>
<li>&quot;delete&quot; - DELETE request which deletes the model</li>
</ul>
<p>The <strong>model</strong> is the model to be saved, or the collection to be populated.</p>
<p>The <strong>options</strong> are used to specify <strong>success</strong> and <strong>error</strong> functions, as well as jQuery AJAX options.</p>
<p>Typically, developers do not call the <strong>sync</strong> function directly; instead, there are specific sync helper methods on models and collections that when called will invoke the <strong>sync</strong> function to perform the various AJAX operations.</p>
<h4 id="sync-functions-on-the-models-and-collections">Sync Functions on the Models and Collections</h4>
<p>As described in the previous section, Backbone models and collections expose the <strong>Backbone.sync</strong> function for synchronizing models and collections with the server. While calling the <strong>sync</strong> function is an acceptable option, Backbone provides helper functions to make performing the commonly used CRUD operations easier.  For models, the three functions <strong>fetch</strong>, <strong>save</strong>, and <strong>destroy</strong> are use to retrieve, create/update and delete models. For collections, there are two functions: <strong>fetch</strong> and <strong>create</strong>.</p>
<h5 id="models">Models</h5>
<p><strong>fetch</strong> - Using the <strong>id</strong> of the model, fills the attributes of the model from the current values stored on the server. The <strong>fetch</strong> function takes a single options argument which is used to specify <strong>success</strong> and <strong>error</strong> functions. If the data retrieved from the server does not match the current values on the attributes of the model, then a Backbone <strong>change</strong> event is triggered.</p>
<p><strong>save</strong> - If the <strong>isNew</strong> property of the model is true, then a new object will be created on the server; otherwise, the <strong>id</strong> attribute will used to update an existing model. The <strong>save</strong> function accepts two arguments, an <strong>attributes</strong> parameter and an <strong>options</strong> parameter.  The <strong>attributes</strong> parameter allows the assignment of new values to the model&#39;s attributes before the create/update operation is executed. If new attribute values are supplied, a Backbone <strong>change</strong> event will be triggered, the request will be made (triggering a Backbone <strong>request</strong> event), and a Backbone <strong>sync</strong> event will be fired once the request has successfully completed.</p>
<p>When specifying new attribute values, if the model has validation logic, and the validation logic fails, then the save operation will be cancelled.</p>
<p>In addition to the attributes parameter, a number of options can be specified as well. If the save operation should only update the changed attributes on the server, not all of the attributes, the <strong>patch</strong> option can be set to <strong>true</strong> on the options object. When specifying new attribute values, if the model should not be updated until AJAX request has be completed then pass the option <strong>wait</strong> set to true on the options object. Finally, <strong>success</strong> and <strong>error</strong> functions can be set on the options object to handle the response.</p>
<p>Also, any additional jQuery AJAX options can be specified on the object and passed through to jQuery&#39;s AJAX function. Passing jQuery options should be limited as it could introduce unnecessary coupling between the application code and the jQuery library.</p>
<p><strong>destroy</strong> - Deletes the model from the server, and removes it from any collections of which it is a member.  Destroy triggers a Backbone <strong>destroy</strong> event which bubbles up to the collections. Similar to <strong>fetch</strong> and <strong>save</strong>, the Backbone <strong>request</strong> event fires when the request is made, and upon successful completion the Backbone <strong>sync</strong> event fires.  Similar to the <strong>wait</strong> option for attribute updates with the <strong>save</strong> function, the <strong>wait</strong> option can be used to delay the local destruction of the model until the model has received a response on deletion from the server.</p>
<h5 id="collections">Collections</h5>
<p><strong>fetch</strong> - The <strong>fetch</strong> function retrieves the collection from the server. The only parameter the <strong>fetch</strong> function accepts is the <strong>options</strong> argument. For <strong>success</strong> and <strong>error</strong> functions, set the success and error properties on the <strong>options</strong> object.</p>
<p><strong>create</strong> - The <strong>create</strong> function create a new model in the collection, and saves it to the server.</p>
<h5 id="success-and-error-functions">Success and Error Functions</h5>
<p>For all operations, <strong>success</strong> and <strong>error</strong> functions can be specified. While its beyond the scope of this manual, these <strong>success</strong> and <strong>error</strong> functions can be easily wrapped in promises to promisify the Backbone sync operations. Both the <strong>success</strong> and <strong>error</strong> function are passed the following arguments:</p>
<p><strong>Model Sync Operations</strong></p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>success</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>model</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>response</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>error</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>model</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>response</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div></pre>
<p><strong>Collection Sync Operations</strong></p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>success</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>collection</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>response</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>error</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>collection</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>response</span></span><span class="meta object delimiter js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span></span></div></pre>
<p>The <strong>model</strong> and <strong>collection</strong> arguments are the parsed model or collection from the JSON response.  The <strong>response</strong> argument is the original JSON response. The <strong>options</strong> are the options passed into the <strong>Backbone.ajax</strong> function and includes a reference to the <strong>XHR</strong> object used for the request.</p>
<h4 id="customizing-ajax-requests">Customizing AJAX Requests</h4>
<p>Backbone exposes the function used to make AJAX calls through the <strong>Backbone.ajax</strong> property. The default implementation of this function used jQuery&#39;s low-level <strong>ajax</strong> function to make the AJAX requests. However, this default implementation can be overridden as needed. For web applications which do not use jQuery, this function can be replaced with an implementation that uses another AJAX library or even direct XHR access. The following code demonstrates replacing the default <strong>ajax</strong> function with a non-jQuery version using the built-in XHR object.</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span class="meta function js"><span class="support class js"><span>Backbone</span></span><span>.</span><span class="entity name function js"><span>ajax</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>options</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="storage modifier js"><span>var</span></span><span>&nbsp;xhr&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="meta class instance constructor"><span class="keyword operator new js"><span>new</span></span><span>&nbsp;</span><span class="entity name type instance js"><span>XMLHttpRequest</span></span></span><span class="meta brace round js"><span>(</span><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function js"><span class="support class js"><span>xhr</span></span><span>.</span><span class="entity name function js"><span>onreadystatechange</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>status</span></span><span>&nbsp;</span><span class="keyword operator js"><span>!=</span><span>=</span></span><span>&nbsp;</span><span class="constant numeric js"><span>200</span></span><span>&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>readyState</span></span><span>&nbsp;</span><span class="keyword operator js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>1</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js console"><span>error</span></span><span class="meta brace round js"><span>(</span></span><span>xhr</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span>xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant js"><span>readyState</span></span><span>&nbsp;</span><span class="keyword operator js"><span>==</span></span><span>&nbsp;</span><span class="constant numeric js"><span>4</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options</span><span class="meta delimiter method period js"><span>.</span></span><span>success</span><span class="meta brace round js"><span>(</span></span><span>xhr</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function dom js"><span>open</span></span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>type</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;options</span><span class="meta delimiter method period js"><span>.</span></span><span>url</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>setRequestHeader</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Content-Type</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;options</span><span class="meta delimiter method period js"><span>.</span></span><span>contentType</span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>send</span></span><span class="meta brace round js"><span>(</span></span><span>options</span><span class="meta delimiter method period js"><span>.</span></span><span class="support constant dom js"><span>data</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre>
<p>In addition to overriding the <strong>ajax</strong> function, the <strong>sync</strong> function itself can be overridden. Typically, the <strong>sync</strong> function is overridden when the core AJAX code provider is sufficient, but the application needs pre/post-processings hooks into the AJAX request or responses. Such modifications include adding custom headers, transforming request/response data, logging errors, etc...  Generally, the <strong>sync</strong> method does not need to be completely replaced, it just needs to be intercepted as shown below. A base model for the application can be created, then that base model can &quot;override&quot; the original <strong>sync</strong> function. Then within the override function, the original <strong>sync</strong> method is called using <strong>apply</strong> after custom processing has been completed. Review the following code:</p>
<pre class="editor-colors lang-javascript"><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage modifier js"><span>var</span></span><span>&nbsp;BaseModel&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>Model</span><span class="meta delimiter method period js"><span>.</span></span><span>extend</span><span class="meta brace round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function json js"><span class="entity name function js"><span>sync</span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;configure&nbsp;a&nbsp;before&nbsp;send&nbsp;function</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="keyword operator js"><span>!</span></span><span>arguments</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>2</span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arguments</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>2</span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="punctuation section scope begin js"><span>{</span></span><span class="punctuation section scope end js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arguments</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>2</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="meta function js"><span class="entity name function js"><span>beforeSend</span></span><span>&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;</span><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="variable parameter function js"><span>xhr</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;add&nbsp;a&nbsp;custom&nbsp;header</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xhr</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>setRequestHeader</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>X-CSRF-Token</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>5mwH9VTi-WGHWxVYMyDxVKMlmsNa3adp_nEA</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Backbone</span><span class="meta delimiter method period js"><span>.</span></span><span>sync</span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>apply</span></span><span class="meta brace round js"><span>(</span></span><span class="variable language js"><span>this</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;arguments</span><span class="meta brace round js"><span>)</span></span><span class="meta delimiter method period js"><span>.</span></span><span>then</span><span class="meta brace round js"><span>(</span></span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="punctuation definition parameters begin js"><span>(</span></span><span class="punctuation definition parameters end js"><span>)</span></span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span class="punctuation whitespace comment leading js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;retrieve&nbsp;the&nbsp;new&nbsp;CSRF&nbsp;token&nbsp;from&nbsp;the&nbsp;response</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="support class js"><span>window</span></span><span class="meta delimiter method period js"><span>.</span></span><span>csrfToken&nbsp;</span><span class="keyword operator js"><span>=</span></span><span>&nbsp;arguments</span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>2</span></span><span class="meta brace square js"><span>]</span></span><span class="meta delimiter method period js"><span>.</span></span><span class="support function js"><span>getResponseHeader</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>X-CSRF-Token</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span><span class="meta brace round js"><span>)</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre>
<p>The above code sample demonstrate the true flexibility and extensibility of JavaScript, its many libraries and especially Backbone. Finally, it is worth mentioning that when using jQuery for AJAX calls many of the same customizations described in this section can be accomplished using the global AJAX handlers provided by jQuery. However, there are several down sides to using these global handlers. First, these handlers will apply to all AJAX calls made with jQuery not just the Backbone triggered calls. Secondly, the global handlers will not have direct access to the models and collections making the calls. Finally, using the handlers will tightly couple the application to jQuery for performing AJAX calls.</p>
<h4 id="additional-options-on-the-sync-object">Additional Options on the Sync Object</h4>
<p>There are two additional options available on the <strong>Backbone</strong> object related to synchronization that are used when working with legacy web servers or very restrictive networks.</p>
<p><strong>emulateHTTP</strong> - Some legacy web servers are not configured to accept HTTP PUT, PATCH and DELETE requests.  Even some very restrictive networks will filter out such requests.  To work around this scenario, this option can be set to <strong>true</strong> (default is <strong>false</strong>), and Backbone will use a POST request for these requests and set an additional header named <strong>HTTP-Method-Override</strong> which will list the appropriate HTTP method.  The REST services can then use the value of this header to execute the appropriate operation.</p>
<p><strong>emulateJSON</strong> - Some legacy web servers and application platforms are not able to handle JSON.  For these situations, this option can be set to <strong>true</strong> (default is <strong>false</strong>) and the model data in the request body will be submitted as a url-encoded form posting with the model data assigned to a form variable named <strong>model</strong>.</p>
<h3 id="review-questions">Review Questions</h3>
<ol>
<li>Is JavaScript multithreaded? Is asynchronous programming primarily intended for single-threaded environments or multi-threaded environments?</li>
<li>What browser object is used to perform AJAX operations?</li>
<li>What which JavaScript library does Backbone.js use by default to perform AJAX operations?</li>
<li>Can the sync method provided by Backbone.js be replaced with a custom method?  What is one instance where this might be needed?</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>Backbone is a great JavaScript library for building single web page applications. It provides the basic functionality needed for managing data, building views and routing users from part of the application to the other.</p></body>
</html>
